{
  "name": "Error Ciudad Import",
  "nodes": [
    {
      "parameters": {
        "jsCode": "// Generar mensaje de error con datos completos\nconst items = $input.all();\n\nif (items.length === 0) {\n  return [{ json: { mensaje: '', cantidad: 0 } }];\n}\n\nconst errores = items.map(item => {\n  const p = item.json;\n  return `â€¢ *${p.nombres} ${p.apellidos}*\n   ğŸ“ ${p.direccion}\n   ğŸ™ï¸ ${p.ciudad}\n   ğŸ“± ${p.celular}\n   ğŸ’° $${p.totalConIva?.toLocaleString() || 'N/A'}\n   âŒ ${p._error}`;\n}).join('\\n\\n');\n\nreturn [{\n  json: {\n    mensaje: `âŒ *Pedidos rechazados:*\\n\\n${errores}`,\n    cantidad: items.length\n  }\n}];"
      },
      "id": "error-ciudad",
      "name": "Error: Ciudad InvÃ¡lida",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1760, 300]
    }
  ],
  "connections": {},
  "settings": {
    "executionOrder": "v1"
  }
}
